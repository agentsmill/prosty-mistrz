<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gra E-learningowa: Mistrz Prompt√≥w Energetycznych</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- Style Podstawowe i Kontener√≥w (bez zmian) --- */
        body { font-family: 'Press Start 2P', cursive; background-color: #2c3e50; color: #ecf0f1; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; line-height: 1.6; }
        .game-wrapper { max-width: 800px; width: 100%; }
        #start-screen, #game-container { background-color: #34495e; border: 4px solid #ecf0f1; padding: 30px; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5); text-align: center; }
        #game-container { display: none; }

        /* --- Nag≈Ç√≥wki (bez zmian) --- */
        h1 { color: #f1c40f; margin-bottom: 30px; font-size: 1.8em; text-shadow: 3px 3px #000; line-height: 1.3; }
        h2 { color: #e67e22; margin-bottom: 25px; font-size: 1.1em; text-shadow: 2px 2px #000; }
        h3 { color: #1abc9c; margin-bottom: 15px; font-size: 1.1em; text-shadow: 1px 1px #000; }
        #feedback-display h3 { color: #f1c40f; margin-top: 0; text-align: center; text-shadow: 1px 1px #000; }

        /* --- Tekst (bez zmian) --- */
        p { font-size: 0.9em; line-height: 1.6; margin-bottom: 15px; text-align: left; }
        #start-screen p { text-align: center; margin-left: auto; margin-right: auto; max-width: 90%; }
        .content-area p { font-size: 0.8em; margin-bottom: 10px; max-width: 95%; line-height: 1.5; }
        .content-area p:last-child { margin-bottom: 0; }
        #task-text { text-align: center; font-size: 0.9em; font-weight: bold; }
        .example-prompt, .context-snippet { background-color: #2c3e50; border: 1px dashed #7f8c8d; padding: 10px; margin: 10px 0; border-radius: 4px; font-size: 0.9em; white-space: pre-wrap; text-align: left; }
        .example-prompt code, .context-snippet code { font-family: 'Press Start 2P', cursive; }
        #task-context-wrapper { width: 95%; margin: 15px auto 0 auto; text-align: left; }
        #task-context-wrapper .context-label { font-weight: bold; color: #ecf0f1; display: block; margin-bottom: 5px; font-size: 0.8em; }
        #task-context-wrapper .task-question { font-weight: bold; color: #f1c40f; margin-top: 15px; display: block; font-size: 0.85em; text-align: center; }

        /* --- Obszary Tre≈õci (bez zmian) --- */
        .content-area { background-color: #2c3e50; padding: 20px; border: 2px dashed #95a5a6; margin-bottom: 25px; border-radius: 5px; min-height: 150px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #explanation-display { display: none; }
        #task-display { display: none; }

        /* --- Pole Wprowadzania i Alternatywne Zadania --- */
        #prompt-input-area { display: none; }
        #prompt-input { width: calc(100% - 24px); height: 180px; font-family: 'Press Start 2P', cursive; background-color: #ecf0f1; color: #2c3e50; border: 2px solid #95a5a6; padding: 10px; margin-bottom: 20px; border-radius: 5px; font-size: 0.8em; box-sizing: border-box; }
        #choice-task-area { display: none; width: 100%; text-align: left;}
        .prompt-choice { background-color: #4a647e; border: 2px solid #95a5a6; padding: 15px; margin-bottom: 15px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; }
        .prompt-choice:hover { background-color: #5d7c9a; }
        .prompt-choice input[type="radio"] { margin-right: 10px; vertical-align: middle; }
        .prompt-choice label { vertical-align: middle; font-size: 0.85em; cursor: pointer; display: block; /* Etykieta zajmuje ca≈ÇƒÖ szeroko≈õƒá */ }
        .prompt-choice pre { background-color: #2c3e50; padding: 8px; margin-top: 8px; border-radius: 3px; white-space: pre-wrap; word-wrap: break-word; font-size: 0.9em; }
        /* Style dla zadania typu identify_knowledge_source */
        .knowledge-source-question { margin-bottom: 15px; font-weight: bold; color: #f1c40f; }
        .knowledge-source-output { background-color: #1a2531; border: 1px solid #7f8c8d; padding: 10px; margin-bottom: 15px; border-radius: 4px; font-style: italic; }


        /* --- Przyciski (bez zmian) --- */
        .button-container { margin-top: 20px; }
        button { font-family: 'Press Start 2P', cursive; background-color: #2ecc71; color: #ffffff; border: 2px solid #27ae60; padding: 12px 25px; cursor: pointer; border-radius: 8px; font-size: 0.9em; transition: background-color 0.3s ease, transform 0.1s ease; box-shadow: 0 4px #27ae60; margin: 10px 5px; text-shadow: 1px 1px #1e824c; }
        button:hover { background-color: #27ae60; }
        button:active { transform: translateY(2px); box-shadow: 0 2px #27ae60; }
        #start-button { background-color: #e67e22; border-color: #d35400; box-shadow: 0 4px #d35400; font-size: 1.1em; padding: 15px 35px; text-shadow: 1px 1px #b85a14; }
        #start-button:hover { background-color: #d35400; }
        #start-button:active { transform: translateY(2px); box-shadow: 0 2px #d35400; }
        #proceed-button { background-color: #e67e22; border-color: #d35400; box-shadow: 0 4px #d35400; display: none; text-shadow: 1px 1px #b85a14; }
        #proceed-button:hover { background-color: #d35400; }
        #proceed-button:active { transform: translateY(2px); box-shadow: 0 2px #d35400; }
        #submit-button { display: none; }
        #submit-button.react-submit::after { content: " (Oce≈Ñ Opis)"; font-size: 0.8em; }
        #submit-button.choice-submit::after { content: " (Oce≈Ñ Wyb√≥r)"; font-size: 0.8em; }
        #submit-button.answer-submit::after { content: " (Oce≈Ñ Odpowied≈∫)"; font-size: 0.8em; }
        #next-button { background-color: #3498db; border-color: #2980b9; box-shadow: 0 4px #2980b9; display: none; text-shadow: 1px 1px #1f648d; }
        #next-button:hover { background-color: #2980b9; }
        #next-button:active { transform: translateY(2px); box-shadow: 0 2px #2980b9; }

        /* --- Obszar Informacji Zwrotnej (bez zmian) --- */
        #feedback-display { margin-top: 30px; background-color: #1a2531; padding: 20px; border-radius: 5px; border: 2px solid #7f8c8d; text-align: left; font-size: 0.8em; min-height: 150px; display: none; }
        #feedback-display ul { list-style-type: none; padding: 0; }
        #feedback-display li { margin-bottom: 10px; padding-left: 25px; position: relative; line-height: 1.4; }
        #feedback-display li.good::before { content: '‚úÖ'; position: absolute; left: 0; top: 0; }
        #feedback-display li.improve::before { content: 'üí°'; position: absolute; left: 0; top: 0; }
        #feedback-display li.model-tip::before { content: 'ü§ñ'; position: absolute; left: 0; top: 0; }
        #feedback-display li.info::before { content: '‚ÑπÔ∏è'; position: absolute; left: 0; top: 0; }
        .points { font-weight: bold; color: #f1c40f; margin-left: 5px; }
        .no-points { font-weight: bold; color: #e74c3c; margin-left: 5px; }

        /* --- Wynik (bez zmian) --- */
        #score-display { margin-top: 20px; font-size: 1.1em; color: #e67e22; text-shadow: 1px 1px #000; }

        /* --- Ukrywanie Element√≥w (bez zmian) --- */
        .hidden { display: none !important; }

        /* --- Prosty Modal (bez zmian) --- */
        .simple-modal { position: fixed; left: 50%; top: 30%; transform: translate(-50%, -50%); background-color: #f1c40f; color: #2c3e50; padding: 25px; border: 4px solid #ecf0f1; border-radius: 8px; z-index: 1000; font-family: "'Press Start 2P', cursive"; font-size: 0.8em; box-shadow: 0 0 15px rgba(0,0,0,0.6); max-width: 80%; text-align: center; }
        .simple-modal button { font-size: 0.9em; margin-top: 20px; padding: 10px 18px; display: block; margin-left: auto; margin-right: auto; background-color: #2ecc71; color: #ffffff; border: 2px solid #27ae60; border-radius: 5px; cursor: pointer; }
        .simple-modal button:hover { background-color: #27ae60; }

        /* --- Style dla instrukcji na ekranie startowym (bez zmian) --- */
        #start-screen ul { list-style-type: none; padding: 0; margin: 20px auto; max-width: 80%; text-align: left; font-size: 0.85em; }
        #start-screen li { margin-bottom: 10px; padding-left: 30px; position: relative; }
        #start-screen li::before { position: absolute; left: 0; top: 2px; font-size: 1.2em; }
        #start-screen li:nth-child(1)::before { content: 'üìñ'; } #start-screen li:nth-child(2)::before { content: '‚å®Ô∏è'; } #start-screen li:nth-child(3)::before { content: 'üìä'; } #start-screen li:nth-child(4)::before { content: '‚û°Ô∏è'; }

    </style>
</head>
<body>
    <div class="game-wrapper">
        <div id="start-screen">
             <h1>‚ö° Mistrz Prompt√≥w Energetycznych ‚ö°</h1>
             <h2>Interaktywny Trening Prompt Engineeringu</h2>
             <p>Witaj! Ta gra pomo≈ºe Ci opanowaƒá sztukƒô tworzenia skutecznych prompt√≥w dla modeli AI, skupiajƒÖc siƒô na tematyce transformacji energetycznej.</p>
             <p>Nauczysz siƒô r√≥≈ºnych technik, od podstawowych po zaawansowane, i przeƒáwiczysz je w praktyce.</p>
             <h3>Jak Graƒá?</h3>
             <ul>
                 <li>Czytaj wyja≈õnienie ka≈ºdej techniki (z przyk≈Çadami!).</li>
                 <li>Wykonaj zadanie: napisz prompt, opisz proces lub wybierz najlepszƒÖ opcjƒô.</li>
                 <li>Sprawd≈∫ ocenƒô i wskaz√≥wki (zobaczysz, za co zdobywasz punkty!).</li>
                 <li>Przejd≈∫ do nastƒôpnej lekcji i zosta≈Ñ Mistrzem Prompt√≥w!</li>
             </ul>
             <button id="start-button">Rozpocznij Grƒô!</button>
         </div>

        <div id="game-container">
            <div id="explanation-display" class="content-area"> <h3 id="explanation-title"></h3> <div id="explanation-text"></div> </div>
             <div id="task-display" class="content-area"> <h3>Twoje Wyzwanie:</h3> <div id="task-text"></div> </div>
             <div id="prompt-input-area"> <textarea id="prompt-input" placeholder="Wpisz swojƒÖ odpowied≈∫ tutaj..."></textarea> </div>
             <div id="choice-task-area"></div>
             <div class="button-container"> <button id="proceed-button">Rozumiem, do wyzwania!</button> <button id="submit-button">Oce≈Ñ Odpowied≈∫</button> <button id="next-button">Nastƒôpna Lekcja</button> </div>
             <div id="score-display">Wynik: 0</div>
             <div id="feedback-display"> <h3>Analiza Odpowiedzi</h3> <ul id="feedback-list"></ul> </div>
        </div>
    </div>

    <script>
        // --- Konfiguracja Gry ---
        const scenarios = [
            // Lekcje 1-7 (bez zmian w kodzie)
             { id: 1, technique: "Zero-Shot Prompting (Instrukcja Bezpo≈õrednia)", explanation: "<p>Zero-Shot to podstawowa forma: wydajesz bezpo≈õredniƒÖ instrukcjƒô bez wcze≈õniejszych przyk≈Çad√≥w.</p><p>Kluczem jest maksymalna jasno≈õƒá, precyzja i dostarczenie ca≈Çego niezbƒôdnego kontekstu w instrukcji.</p><p>Przyk≈Çad prostego promptu Zero-Shot:</p><div class='example-prompt'><code>Opisz kr√≥tko zasadƒô dzia≈Çania elektrowni wiatrowej.</code></div>", task: "Opisz kr√≥tko (1-2 zdania/pkt) 3 g≈Ç√≥wne zalety wodoru jako paliwa w transporcie publicznym vs pojazdy bateryjne (BEV).", task_type: 'write_prompt', evaluation: (promptText, scenario)=>{ const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { task: 2, context: 4, format: 1 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); if (lowerPrompt.includes('opisz') || lowerPrompt.includes('wymie≈Ñ') || lowerPrompt.includes('przedstaw') || lowerPrompt.includes('podaj') || lowerPrompt.includes('por√≥wnaj zalety')) { feedback.push({ type: 'good', text: `Zadanie jest jasno okre≈õlone (Task). <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe jasno okre≈õlasz zadanie, np. "Opisz...", "Wymie≈Ñ..." (Task).' }); } let contextScoreCheck = 0; if (lowerPrompt.includes('wod√≥r') || lowerPrompt.includes('wodor') || lowerPrompt.includes('h2')) contextScoreCheck++; if (lowerPrompt.includes('zalety') || lowerPrompt.includes('korzy≈õci') || lowerPrompt.includes('plusy')) contextScoreCheck++; if (lowerPrompt.includes('transport publiczny') || lowerPrompt.includes('komunikacj miejsk')) contextScoreCheck++; if (lowerPrompt.includes('por√≥wnaniu') || lowerPrompt.includes('wzglƒôdem') || lowerPrompt.includes('kontra') || lowerPrompt.includes('vs')) contextScoreCheck++; if (lowerPrompt.includes('elektryczn') || lowerPrompt.includes('bateryj') || lowerPrompt.includes('bev')) contextScoreCheck++; if (contextScoreCheck >= 4) { feedback.push({ type: 'good', text: `Bardzo dobrze! Zawarto kluczowe elementy kontekstu (wod√≥r, zalety, transport, por√≥wnanie do BEV). <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: `Brakuje kluczowych element√≥w kontekstu <span class="no-points">(-${points.context} pkt)</span>. W Zero-Shot musisz podaƒá wszystko: co opisaƒá (zalety wodoru), gdzie (transport publ.), i w jakim odniesieniu (vs BEV).` }); } if (lowerPrompt.includes('3') || lowerPrompt.includes('trzy') || lowerPrompt.includes('kr√≥tko') || lowerPrompt.includes('1-2 zdania') || lowerPrompt.includes('punkty') || lowerPrompt.includes('lista')) { feedback.push({ type: 'good', text: `Okre≈õlono oczekiwany format/ilo≈õƒá (Format). <span class="points">(+${points.format} pkt)</span>` }); scoreIncrement += points.format; } else { feedback.push({ type: 'improve', text: 'Warto okre≈õliƒá format odpowiedzi, np. "w 3 punktach", "kr√≥tko" (Format).' }); } feedback.push({ type: 'model-tip', text: 'W Zero-Shot precyzja jest najwa≈ºniejsza. Unikaj niejasno≈õci.' }); return { feedback, scoreIncrement }; } },
            { id: 2, technique: "Role Prompting (Persona)", explanation: "<p>Nadaj AI konkretnƒÖ rolƒô (np. 'Jeste≈õ ekspertem...'). Pomaga to dostosowaƒá styl i wiedzƒô.</p><p>Przyk≈Çad:</p><div class='example-prompt'><code>Jako analityk rynku energii odnawialnej, wymie≈Ñ 3 kluczowe trendy w fotowoltaice na rok 2025.</code></div>", task: "Potrzebne sƒÖ 3 kr√≥tkie, innowacyjne pomys≈Çy na spo≈Çeczne projekty s≈Çoneczne w miastach, anga≈ºujƒÖce mieszka≈Ñc√≥w. Przygotuj propozycje przekonujƒÖce dla zarzƒÖdu miasta.", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { role: 4, task: 1, context: 2, format: 1 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); if (lowerPrompt.includes('jeste≈õ') || lowerPrompt.includes('wcielasz siƒô') || lowerPrompt.includes('jako analityk') || lowerPrompt.includes('twoja rola') || lowerPrompt.includes('jako ekspert') || lowerPrompt.includes('dzia≈Çaj jako')) { feedback.push({ type: 'good', text: `≈öwietnie! Zastosowa≈Çe≈õ Role Prompting, definiujƒÖc rolƒô AI. <span class="points">(+${points.role} pkt)</span>` }); scoreIncrement += points.role; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz lekcjƒô o Role Prompting? Brak zdefiniowanej roli <span class="no-points">(-${points.role} pkt)</span>. Spr√≥buj nadaƒá AI rolƒô, np. "Jako do≈õwiadczony analityk OZE...".` }); } if (lowerPrompt.includes('wygeneruj') || lowerPrompt.includes('stw√≥rz') || lowerPrompt.includes('podaj') || lowerPrompt.includes('przygotuj') || lowerPrompt.includes('zaproponuj')) { feedback.push({ type: 'good', text: `Jasno okre≈õlone zadanie (Task). <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Pamiƒôtaj o jasnym okre≈õleniu zadania (Task), np. "Wygeneruj...".' }); } let contextScore = 0; if (lowerPrompt.includes('s≈Çoneczn') || lowerPrompt.includes('fotowoltaik')) contextScore++; if (lowerPrompt.includes('spo≈Çeczne') || lowerPrompt.includes('wsp√≥lnotowe')) contextScore++; if (lowerPrompt.includes('miast') || lowerPrompt.includes('miejskich')) contextScore++; if (lowerPrompt.includes('mieszka≈Ñc') || lowerPrompt.includes('obywatel')) contextScore++; if (lowerPrompt.includes('zarzƒÖd') || lowerPrompt.includes('przekonujƒÖce')) contextScore++; if (contextScore >= 3) { feedback.push({ type: 'good', text: `Dobrze uchwycony kontekst zadania. <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: 'Dodaj wiƒôcej szczeg√≥≈Ç√≥w kontekstowych (energia s≈Çoneczna, projekty spo≈Çeczne, miasta, mieszka≈Ñcy, cel - przekonanie zarzƒÖdu).' }); } if (lowerPrompt.includes('3') || lowerPrompt.includes('trzy') || lowerPrompt.includes('kr√≥tkie') || lowerPrompt.includes('pomys≈Çy') || lowerPrompt.includes('lista') || lowerPrompt.includes('punkty')) { feedback.push({ type: 'good', text: `Okre≈õlono oczekiwany format/ilo≈õƒá (Format). <span class="points">(+${points.format} pkt)</span>` }); scoreIncrement += points.format; } else { feedback.push({ type: 'improve', text: 'Warto okre≈õliƒá format odpowiedzi, np. "w 3 punktach" (Format).' }); } feedback.push({ type: 'model-tip', text: 'Role Prompting jest bardzo skuteczny we wszystkich modelach LLM.' }); return { feedback, scoreIncrement }; } },
            { id: 3, technique: "Okre≈õlanie Odbiorcy i Stylu", explanation: "<p>Precyzuj, dla kogo jest odpowied≈∫ i w jakim stylu ma byƒá napisana (np. prostym, technicznym, z analogiami).</p><p>Przyk≈Çad:</p><div class='example-prompt'><code>Wyja≈õnij dzia≈Çanie magazynu energii cieplnej prostym jƒôzykiem, tak aby zrozumia≈Ço to dziecko w wieku 10 lat. U≈ºyj por√≥wnania do termosu.</code></div>", task: "Wyja≈õnij koncepcjƒô 'inteligentnej sieci energetycznej' (smart grid). Celem jest przedstawienie jej korzy≈õci na spotkaniu z mieszka≈Ñcami osiedla bez wiedzy technicznej. Jak by≈õ to zrobi≈Ç?", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { audience: 3, style: 3, task: 1, context: 1 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); if (lowerPrompt.includes('bez wiedzy') || lowerPrompt.includes('laik') || lowerPrompt.includes('nietechniczn') || lowerPrompt.includes('prosty spos√≥b') || lowerPrompt.includes('≈Çatwy') || lowerPrompt.includes('zrozumia≈Çy') || lowerPrompt.includes('dla mieszka≈Ñc√≥w') || lowerPrompt.includes('dla laika')) { feedback.push({ type: 'good', text: `≈öwietnie! Okre≈õli≈Çe≈õ odbiorcƒô i/lub po≈ºƒÖdany poziom prostoty. <span class="points">(+${points.audience} pkt)</span>` }); scoreIncrement += points.audience; } else { feedback.push({ type: 'improve', text: `W tej lekcji kluczowe jest okre≈õlenie odbiorcy. Brak tego <span class="no-points">(-${points.audience} pkt)</span>. Sprecyzuj, ≈ºe wyja≈õnienie ma byƒá proste, np. "dla osoby bez wiedzy technicznej".` }); } if (lowerPrompt.includes('analogii') || lowerPrompt.includes('por√≥wnania') || lowerPrompt.includes('przyk≈Çad') || lowerPrompt.includes('metafory')) { feedback.push({ type: 'good', text: `Dobrze, ≈ºe poprosi≈Çe≈õ o analogiƒô/por√≥wnanie! <span class="points">(+${points.style} pkt)</span>` }); scoreIncrement += points.style; } else { feedback.push({ type: 'improve', text: `Warto poprosiƒá o konkretny styl/narzƒôdzie (np. analogiƒô), aby u≈Çatwiƒá zrozumienie <span class="no-points">(-${points.style} pkt)</span>. Dodaj np. "U≈ºyj analogii do...".` }); } if (lowerPrompt.includes('wyja≈õnij') || lowerPrompt.includes('opisz') || lowerPrompt.includes('przedstaw')) { feedback.push({ type: 'good', text: `Zadanie wyja≈õnienia jest jasne (Task). <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Okre≈õl jasno zadanie, np. "Wyja≈õnij..." (Task).' }); } if (lowerPrompt.includes('inteligentnej sieci') || lowerPrompt.includes('smart grid')) { feedback.push({ type: 'good', text: `Wskazano temat wyja≈õnienia (Context). <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: 'Nie zapomnij wspomnieƒá o temacie: "inteligentna sieƒá energetyczna" (Context).' }); } feedback.push({ type: 'model-tip', text: 'Definiowanie odbiorcy jest wa≈ºne dla wszystkich modeli, ale szczeg√≥lnie dla modeli kreatywnych jak Claude czy Gemini.' }); return { feedback, scoreIncrement }; } },
            { id: 4, technique: "Precyzowanie Formatu i D≈Çugo≈õci", explanation: "<p>Okre≈õl format (np. lista punktowana, tabela, JSON) i d≈Çugo≈õƒá (np. 2 zdania, 100 s≈Ç√≥w), aby dostaƒá to, czego potrzebujesz.</p><p>Przyk≈Çad:</p><div class='example-prompt'><code>Wymie≈Ñ 5 g≈Ç√≥wnych ≈∫r√≥de≈Ç energii odnawialnej w Polsce. Odpowied≈∫ przedstaw w formie listy numerowanej, ka≈ºde ≈∫r√≥d≈Ço w osobnym punkcie. Maksymalnie 50 s≈Ç√≥w ≈ÇƒÖcznie.</code></div>", task: "Przygotuj chwytliwy argument marketingowy dla w≈Ça≈õcicieli dom√≥w o pompie ciep≈Ça (oszczƒôdno≈õci, ekologia). Ma byƒá zwiƒôz≈Çy (ulotka/reklama online).", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { length: 3, formatStyle: 2, task: 1, context: 2 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); if (lowerPrompt.includes('kr√≥tki') || lowerPrompt.includes('2-3 zdania') || lowerPrompt.includes('zwiƒô≈∫le') || lowerPrompt.includes('maksymalnie') || lowerPrompt.includes('nie wiƒôcej ni≈º') || lowerPrompt.includes('kilka zda≈Ñ') || lowerPrompt.includes('jedno zdanie')) { feedback.push({ type: 'good', text: `≈öwietnie! Okre≈õli≈Çe≈õ oczekiwanƒÖ d≈Çugo≈õƒá/zwiƒôz≈Ço≈õƒá. <span class="points">(+${points.length} pkt)</span>` }); scoreIncrement += points.length; } else { feedback.push({ type: 'improve', text: `W tej lekcji ƒáwiczymy precyzowanie d≈Çugo≈õci. Brak tego <span class="no-points">(-${points.length} pkt)</span>. Dodaj np. "maksymalnie 2-3 zdania", "bardzo zwiƒô≈∫le".` }); } if (lowerPrompt.includes('ulotce') || lowerPrompt.includes('tekst marketingowy') || lowerPrompt.includes('argument') || lowerPrompt.includes('punktowany') || lowerPrompt.includes('chwytliwy') || lowerPrompt.includes('reklama') || lowerPrompt.includes('has≈Ço') || lowerPrompt.includes('lista')) { feedback.push({ type: 'good', text: `Dobrze, ≈ºe zasugerowa≈Çe≈õ format/styl. <span class="points">(+${points.formatStyle} pkt)</span>` }); scoreIncrement += points.formatStyle; } else { feedback.push({ type: 'improve', text: `Warto te≈º okre≈õliƒá format/styl <span class="no-points">(-${points.formatStyle} pkt)</span>, np. "jako tekst marketingowy", "w formie listy punktowanej".` }); } if (lowerPrompt.includes('napisz') || lowerPrompt.includes('stw√≥rz') || lowerPrompt.includes('przygotuj')) { feedback.push({ type: 'good', text: `Jasno okre≈õlone zadanie (Task). <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Okre≈õl zadanie, np. "Napisz argument..." (Task).' }); } let contextScore = 0; if (lowerPrompt.includes('pomp') || lowerPrompt.includes('ciep≈Ça')) contextScore++; if (lowerPrompt.includes('oszczƒôdno≈õci') || lowerPrompt.includes('koszty')) contextScore++; if (lowerPrompt.includes('ekologi') || lowerPrompt.includes('≈õrodowisk')) contextScore++; if (lowerPrompt.includes('domu') || lowerPrompt.includes('w≈Ça≈õciciela')) contextScore++; if (contextScore >= 3) { feedback.push({ type: 'good', text: `Dobrze wskazane kluczowe argumenty i odbiorca (Context). <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: 'Podkre≈õl kluczowe korzy≈õci (oszczƒôdno≈õci, ekologia) i temat (pompa ciep≈Ça) (Context).' }); } feedback.push({ type: 'model-tip', text: 'Precyzowanie formatu jest wa≈ºne dla wszystkich modeli, ale szczeg√≥lnie pomocne przy generowaniu kodu lub danych strukturalnych.' }); return { feedback, scoreIncrement }; } },
            { id: 5, technique: "Few-Shot Prompting (Uczenie na Przyk≈Çadach)", explanation: "<p>Few-Shot: podaj AI kilka przyk≈Çad√≥w (shots) po≈ºƒÖdanego wyniku PRZED zadaniem g≈Ç√≥wnego pytania.</p><p>Pomaga AI zrozumieƒá oczekiwania, zw≈Çaszcza przy niestandardowych formatach.</p><p>Przyk≈Çad struktury:</p><div class='example-prompt'><code>Przyk≈Çad 1: Produkt: Szybki Internet ≈öwiat≈Çowodowy, Has≈Ço: Surfuj z prƒôdko≈õciƒÖ ≈õwiat≈Ça!\nPrzyk≈Çad 2: Produkt: Mobilna Aplikacja Bankowa, Has≈Ço: Tw√≥j bank w kieszeni, zawsze pod rƒôkƒÖ.\n\nZadanie: Wygeneruj 3 has≈Ça dla produktu 'Inteligentny Termostat Domowy'.</code></div>", task: "Wygeneruj 3 kr√≥tkie, chwytliwe has≈Ça reklamowe dla taryfy 'EkoPlus' (100% OZE, sta≈Ça cena). Podaj najpierw 1-2 przyk≈Çady hase≈Ç w podobnym stylu.", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { fewShot: 4, task: 1, context: 1 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); const exampleKeywords = ['przyk≈Çad', 'np.', 'np:', 'has≈Ço:', 'oto przyk≈Çad', 'oto przyk≈Çady']; const mainTaskKeywords = ['wygeneruj', 'stw√≥rz', 'podaj', 'ekoplus', 'zadanie:']; let foundExample = false; let exampleIndex = -1; let taskIndex = 10000; for (const keyword of exampleKeywords) { const idx = lowerPrompt.indexOf(keyword); if (idx !== -1) { foundExample = true; if (exampleIndex === -1 || idx < exampleIndex) { exampleIndex = idx; } } } for (const keyword of mainTaskKeywords) { const idx = lowerPrompt.indexOf(keyword); if (idx !== -1) { if (idx < taskIndex) { taskIndex = idx; } } } if (foundExample && taskIndex !== 10000 && exampleIndex < taskIndex) { feedback.push({ type: 'good', text: `Doskonale! Zastosowa≈Çe≈õ Few-Shot, podajƒÖc przyk≈Çady PRZED g≈Ç√≥wnym zadaniem. <span class="points">(+${points.fewShot} pkt)</span>` }); scoreIncrement += points.fewShot; } else if (foundExample) { feedback.push({ type: 'improve', text: `Zauwa≈ºy≈Çem przyk≈Çady, ale upewnij siƒô, ≈ºe podajesz je PRZED g≈Ç√≥wnym poleceniem (np. oddzielajƒÖc je s≈Çowem "Zadanie:") <span class="no-points">(-${points.fewShot} pkt)</span>.` }); } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz lekcjƒô o Few-Shot? Brak przyk≈Çad√≥w <span class="no-points">(-${points.fewShot} pkt)</span>. Spr√≥buj podaƒá 1-2 przyk≈Çady hase≈Ç przed g≈Ç√≥wnym poleceniem.` }); } if (taskIndex !== 10000 && (lowerPrompt.includes('3') || lowerPrompt.includes('trzy')) && lowerPrompt.includes('ekoplus')) { feedback.push({ type: 'good', text: `G≈Ç√≥wne zadanie jest obecne i jasne. <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe w prompcie jest g≈Ç√≥wne polecenie: wygenerowanie 3 hase≈Ç dla taryfy EkoPlus.' }); } let contextScore = 0; if (lowerPrompt.includes('has≈Ça') || lowerPrompt.includes('slogany')) contextScore++; if (lowerPrompt.includes('reklamowe') || lowerPrompt.includes('chwytliwe')) contextScore++; if (lowerPrompt.includes('oze') || lowerPrompt.includes('odnawialn')) contextScore++; if (lowerPrompt.includes('sta≈Ça cena')) contextScore++; if (contextScore >= 2) { feedback.push({ type: 'good', text: `Dobrze okre≈õlony kontekst. <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: 'Dodaj wiƒôcej kontekstu o tym, jakie majƒÖ byƒá has≈Ça i co wyr√≥≈ºnia taryfƒô (OZE, sta≈Ça cena).' }); } feedback.push({ type: 'model-tip', text: 'Jako≈õƒá i trafno≈õƒá przyk≈Çad√≥w w Few-Shot jest kluczowa.' }); return { feedback, scoreIncrement }; } },
            { id: 6, technique: "Chain of Thought (CoT - ≈Åa≈Ñcuch My≈õli)", explanation: "<p>CoT instruuje AI, aby my≈õla≈Ço 'krok po kroku' lub pokaza≈Ço proces rozumowania przed odpowiedziƒÖ. Poprawia to wyniki w zadaniach wymagajƒÖcych logiki, oblicze≈Ñ, planowania.</p><p><b>Jak u≈ºyƒá?</b> Dodaj do promptu frazƒô typu:</p><ul><li>'Pomy≈õl krok po kroku.'</li><li>'Rozpisz swoje rozumowanie.'</li><li>'Poka≈º obliczenia.'</li><li>'Przedstaw etapy dochodzenia do wniosku.'</li></ul><p>Nawet je≈õli nie potrzebujesz widzieƒá tych krok√≥w, samo polecenie ich wykonania mo≈ºe wewnƒôtrznie pom√≥c modelowi uzyskaƒá lepszy wynik.</p>", task: "Instalacja PV: dach 80 m¬≤, nas≈Çonecznienie 1100 kWh/m¬≤/rok, sprawno≈õƒá paneli 20%, sprawno≈õƒá systemu 85%. Jaka roczna produkcja energii w kWh? Poka≈º rozumowanie krok po kroku.", task_type: 'write_prompt', evaluation: (promptText, scenario)=>{ const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { cot: 4, task: 1, context: 2 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); const cotKeywords = ['krok po kroku', 'rozumowanie', 'obliczenia', 'poka≈º jak', 'rozpisz', 'etapy', 'my≈õl logicznie', 'przedstaw kroki', 'przeanalizujmy to', 'roz≈Ç√≥≈ºmy']; let foundCoT = false; for (const keyword of cotKeywords) { if (lowerPrompt.includes(keyword)) { foundCoT = true; break; } } if (foundCoT) { feedback.push({ type: 'good', text: `≈öwietnie! Poprosi≈Çe≈õ AI o pokazanie rozumowania (CoT). <span class="points">(+${points.cot} pkt)</span>` }); scoreIncrement += points.cot; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz lekcjƒô o CoT? Brak pro≈õby o pokazanie krok√≥w <span class="no-points">(-${points.cot} pkt)</span>. Dodaj np. "Poka≈º obliczenia krok po kroku.".` }); } let contextScoreCheck = 0; if (lowerPrompt.includes('roczna produkcja') || lowerPrompt.includes('energii') || lowerPrompt.includes('kwh')) contextScoreCheck++; if (lowerPrompt.includes('80 m') || lowerPrompt.includes('80m')) contextScoreCheck++; if (lowerPrompt.includes('1100')) contextScoreCheck++; if (lowerPrompt.includes('20%') || lowerPrompt.includes('0.2')) contextScoreCheck++; if (lowerPrompt.includes('85%') || lowerPrompt.includes('0.85')) contextScoreCheck++; if (lowerPrompt.includes('jaka bƒôdzie') || lowerPrompt.includes('oblicz') || lowerPrompt.includes('wylicz')) { feedback.push({ type: 'good', text: `G≈Ç√≥wne zadanie (obliczenie) jest jasne. <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe jasno okre≈õlasz g≈Ç√≥wne zadanie: obliczenie rocznej produkcji energii.' }); } if (contextScoreCheck >= 4) { feedback.push({ type: 'good', text: `Wszystkie niezbƒôdne dane zosta≈Çy zawarte. <span class="points">(+${points.context} pkt)</span>` }); scoreIncrement += points.context; } else { feedback.push({ type: 'improve', text: 'Aby AI mog≈Ço wykonaƒá obliczenia, musisz podaƒá wszystkie dane: powierzchniƒô, nas≈Çonecznienie, obie sprawno≈õci.' }); } feedback.push({ type: 'model-tip', text: 'CoT znaczƒÖco poprawia wyniki w zadaniach wymagajƒÖcych wieloetapowego rozumowania.' }); return { feedback, scoreIncrement }; } },
            { id: 7, technique: "System Prompting (Instrukcja Globalna)", explanation: "<p>System Prompt (je≈õli dostƒôpny) to instrukcja dzia≈ÇajƒÖca w tle ca≈Çej konwersacji, ustalajƒÖca np. sta≈ÇƒÖ rolƒô, ton, ograniczenia.</p><p>W prompcie u≈ºytkownika mo≈ºna to symulowaƒá, umieszczajƒÖc takƒÖ globalnƒÖ instrukcjƒô na samym poczƒÖtku, przed w≈Ça≈õciwym zadaniem.</p><p><b>Przyk≈Çad symulacji:</b></p><div class='example-prompt'><code>Zawsze odpowiadaj zwiƒô≈∫le, maksymalnie 2 zdania. Unikaj formalnego tonu.\n\nPytanie: Jakie sƒÖ g≈Ç√≥wne zalety OZE?</code></div>", task: "Chcesz uzyskaƒá listƒô 2 technologii magazynowania energii dla stabilizacji sieci. Kt√≥ry z poni≈ºszych prompt√≥w najlepiej symuluje 'System Prompt' ustalajƒÖcy rolƒô i format odpowiedzi?", task_type: 'choose_prompt', options: [ { id: 'A', text: "Wymie≈Ñ 2 technologie magazynowania energii dla stabilizacji sieci. Pamiƒôtaj, aby od teraz zawsze odpowiadaƒá jako ekspert ds. system√≥w energetycznych, u≈ºywajƒÖc formalnego jƒôzyka i poprzedzajƒÖc odpowied≈∫ 'Analiza ekspercka:'.", correct: false }, { id: 'B', text: "Od teraz odpowiadaj wy≈ÇƒÖcznie jako ekspert ds. system√≥w energetycznych, u≈ºywajƒÖc formalnego jƒôzyka. Ka≈ºda odpowied≈∫ musi byƒá poprzedzona frazƒÖ 'Analiza ekspercka:'.\n\nWymie≈Ñ 2 technologie magazynowania energii odpowiednie dla stabilizacji sieci.", correct: true }, { id: 'C', text: "Jako ekspert ds. system√≥w energetycznych, wymie≈Ñ 2 technologie magazynowania energii dla stabilizacji sieci, upewniajƒÖc siƒô, ≈ºe odpowied≈∫ jest wy≈ÇƒÖcznie listƒÖ punktowanƒÖ bez dodatkowych komentarzy.", correct: false } ], evaluation: (chosenOptionId, scenario) => { const feedback = []; let scoreIncrement = 0; const points = { correctChoice: 6 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique} (Wyb√≥r Promptu)` }); const correctOption = scenario.options.find(opt => opt.correct); if (chosenOptionId === correctOption.id) { feedback.push({ type: 'good', text: `Doskonale! Wybra≈Çe≈õ opcjƒô B. <span class="points">(+${points.correctChoice} pkt)</span> Instrukcja "systemowa" jest na poczƒÖtku, PRZED zadaniem, co najlepiej symuluje System Prompt.` }); scoreIncrement += points.correctChoice; } else { let explanation = ""; if (chosenOptionId === 'A') { explanation = "Opcja A umieszcza instrukcjƒô na ko≈Ñcu. Chocia≈º pr√≥buje brzmieƒá globalnie ('od teraz zawsze'), modele AI zazwyczaj przyk≈ÇadajƒÖ wiƒôkszƒÖ wagƒô do instrukcji na poczƒÖtku promptu."; } else if (chosenOptionId === 'C') { explanation = "Opcja C definiuje rolƒô ('Jako ekspert...') tylko dla tego konkretnego zadania i dodaje ograniczenie formatu. Brakuje tu jednak instrukcji, kt√≥ra ma obowiƒÖzywaƒá 'od teraz' lub 'zawsze', co jest charakterystyczne dla symulacji System Promptu."; } feedback.push({ type: 'improve', text: `Wybra≈Çe≈õ opcjƒô ${chosenOptionId}. Poprawna odpowied≈∫ to B <span class="no-points">(-${points.correctChoice} pkt)</span>. ${explanation} Pamiƒôtaj, instrukcja 'systemowa' powinna byƒá na poczƒÖtku i sugerowaƒá sta≈Çe dzia≈Çanie.` }); } feedback.push({ type: 'model-tip', text: 'Prawdziwe System Prompts (w API) sƒÖ potƒô≈ºne do ustalania sta≈Çego zachowania AI.' }); return { feedback, scoreIncrement }; } },
            // === ZMIENIONA LEKCJA 8 ===
            {
                id: 8,
                technique: "Rozpoznawanie ≈πr√≥d≈Ça Wiedzy (Kontekst vs RAG vs Og√≥lna Wiedza)",
                explanation: "<p>SkƒÖd AI bierze odpowiedzi? Mo≈ºe korzystaƒá z:</p><ul><li><b>Og√≥lnej wiedzy:</b> Nauczonej podczas treningu (mo≈ºe byƒá nieaktualna).</li><li><b>Dostarczonego kontekstu:</b> Tekstu podanego bezpo≈õrednio w prompcie (jak w Contextual Prompting).</li><li><b>RAG (Retrieval-Augmented Generation):</b> Mechanizmu, gdzie AI najpierw *wyszukuje* relevantne informacje (np. w bazie danych, internecie), a potem u≈ºywa ich jako *kontekstu* do odpowiedzi.</li><li><b>Halucynacji:</b> Zmy≈õlonych informacji, gdy brakuje wiedzy.</li></ul><p>Zrozumienie ≈∫r√≥d≈Ça pomaga oceniƒá wiarygodno≈õƒá odpowiedzi. Je≈õli potrzebujesz aktualnych lub specyficznych danych, polegaj na dostarczonym kontek≈õcie lub mechanizmach RAG.</p>",
                task: `Rozwa≈º pytanie zadane AI: <div class='context-snippet' style='text-align:center; margin-top: 5px; margin-bottom: 15px;'><code>"Jaka jest aktualna (na dzisiaj) cena referencyjna energii elektrycznej dla aukcji OZE w Polsce og≈Çoszona przez URE?"</code></div> Otrzyma≈Çe≈õ odpowied≈∫: <div class='knowledge-source-output'><code>"Aktualna cena referencyjna dla wiƒôkszo≈õci technologii OZE w aukcjach na rok 2025 wynosi oko≈Ço 380 PLN/MWh, zgodnie z ostatnim rozporzƒÖdzeniem Ministra Klimatu."</code></div> Jakie jest najbardziej prawdopodobne ≈∫r√≥d≈Ço tej (hipotetycznej) odpowiedzi AI?`,
                task_type: 'identify_knowledge_source', // NOWY TYP ZADANIA
                options: [ // Opcje do wyboru dla ≈∫r√≥d≈Ça wiedzy
                    { id: 'A', text: "Og√≥lna wiedza modelu (oparta na danych treningowych, kt√≥re mogƒÖ byƒá nieaktualne).", correct: false },
                    { id: 'B', text: "Kontekst dostarczony w (niewidocznym) prompcie lub wynik dzia≈Çania RAG (np. wyszukanie aktualnego rozporzƒÖdzenia).", correct: true },
                    { id: 'C', text: "Halucynacja / B≈Çƒôdna informacja (model wymy≈õli≈Ç dane).", correct: false }
                ],
                evaluation: (chosenOptionId, scenario) => {
                    const feedback = []; let scoreIncrement = 0;
                    const points = { correctChoice: 6 };
                    feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` });
                    const correctOption = scenario.options.find(opt => opt.correct);

                    if (chosenOptionId === correctOption.id) {
                        feedback.push({ type: 'good', text: `Bardzo dobrze! Wybra≈Çe≈õ opcjƒô B. <span class="points">(+${points.correctChoice} pkt)</span> Pytanie dotyczy bardzo aktualnych, specyficznych danych (cena referencyjna URE 'na dzisiaj'). Modele rzadko majƒÖ tak ≈õwie≈ºe dane w og√≥lnej wiedzy. Odpowied≈∫ podajƒÖca konkretnƒÖ kwotƒô i powo≈ÇujƒÖca siƒô na 'ostatnie rozporzƒÖdzenie' silnie sugeruje, ≈ºe AI otrzyma≈Ço ten kontekst (np. przez RAG) lub zosta≈Ç on podany w prompcie.` });
                        scoreIncrement += points.correctChoice;
                    } else {
                        let explanation = "";
                        if (chosenOptionId === 'A') { explanation = "Opcja A jest ma≈Ço prawdopodobna, bo pytanie wymaga bardzo aktualnych danych, kt√≥rych model raczej nie ma w swojej og√≥lnej wiedzy treningowej."; }
                        else if (chosenOptionId === 'C') { explanation = "Opcja C (halucynacja) jest mo≈ºliwa, ale odpowied≈∫ brzmi do≈õƒá konkretnie i powo≈Çuje siƒô na ≈∫r√≥d≈Ço (rozporzƒÖdzenie). Bardziej prawdopodobne jest, ≈ºe bazuje na jakim≈õ (potencjalnie dostarczonym) kontek≈õcie."; }
                         feedback.push({ type: 'improve', text: `Wybra≈Çe≈õ opcjƒô ${chosenOptionId}. Poprawna odpowied≈∫ to B <span class="no-points">(-${points.correctChoice} pkt)</span>. ${explanation} Kluczem jest aktualno≈õƒá i specyfika danych w pytaniu.` });
                    }
                    // Tips
                    feedback.push({ type: 'model-tip', text: 'RAG to potƒô≈ºne narzƒôdzie do zadawania pyta≈Ñ o aktualne lub specyficzne dane. Wiele system√≥w AI (jak Gemini z rozszerzeniami) u≈ºywa go automatycznie.' });
                    feedback.push({ type: 'model-tip', text: 'Zawsze krytycznie oceniaj odpowiedzi AI, zw≈Çaszcza gdy dotyczƒÖ danych liczbowych, dat lub szybko zmieniajƒÖcych siƒô informacji. Pytaj o ≈∫r√≥d≈Ça!' });
                    return { feedback, scoreIncrement };
                }
            },
            // === NOWA LEKCJA 9: ZarzƒÖdzanie Kontekstem i Pro≈õba o Doprecyzowanie ===
             {
                 id: 9,
                 technique: "ZarzƒÖdzanie Kontekstem i Pro≈õba o Doprecyzowanie",
                 explanation: "<p>Modele AI nie zawsze majƒÖ naj≈õwie≈ºsze dane lub dostƒôp do specyficznych informacji. Zamiast zak≈Çadaƒá, ≈ºe AI wie wszystko, dobrƒÖ praktykƒÖ jest:</p><ul><li>Dostarczanie kluczowego kontekstu (jak w lekcji 8).</li><li>LUB: Pytanie AI, czy ma potrzebne informacje lub czego potrzebuje.</li></ul><p><b>Jak pytaƒá?</b><div class='example-prompt'><code>Potrzebujƒô analizy wp≈Çywu najnowszej dyrektywy UE XYZ na polski rynek OZE. Zanim zaczniesz, powiedz mi, czy masz dostƒôp do tre≈õci tej dyrektywy (opublikowanej w zesz≈Çym tygodniu) i na jakich danych oprzesz swojƒÖ analizƒô?</code></div></p><p>To pomaga uniknƒÖƒá odpowiedzi opartych na przestarza≈Çych danych.</p>",
                 task: "Masz za zadanie uzyskaƒá od AI podsumowanie dotyczƒÖce najnowszych (z ostatniego miesiƒÖca) zmian w polskich regulacjach prawnych dotyczƒÖcych prosument√≥w OZE. Sformu≈Çuj prompt, kt√≥ry najpierw sprawdzi, czy AI ma dostƒôp do tak aktualnych danych lub czy potrzebuje dodatkowych informacji/kontekstu od Ciebie, zanim wygeneruje podsumowanie.",
                 task_type: 'write_prompt',
                 evaluation: (promptText, scenario) => {
                     const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase();
                     const points = { checkContext: 5, task: 2 };
                     feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` });

                     // Sprawdzenie pro≈õby o weryfikacjƒô kontekstu/danych - KLUCZOWY
                     const checkKeywords = ['czy masz dostƒôp', 'zanim zaczniesz', 'powiedz mi czy', 'potrzebujesz wiƒôcej informacji', 'na jakich danych', 'twoja wiedza obejmuje', 'sprawd≈∫ czy wiesz', 'czy posiadasz dane', 'czy wiesz o', 'czy dane sƒÖ aktualne', 'potwierd≈∫ dostƒôp', 'bazujƒÖc na czym'];
                     let foundCheck = false;
                     for (const keyword of checkKeywords) { if (lowerPrompt.includes(keyword)) { foundCheck = true; break; } }

                     if (foundCheck) {
                         feedback.push({ type: 'good', text: `Doskonale! Tw√≥j prompt proaktywnie sprawdza wiedzƒô AI lub pyta o potrzebny kontekst przed g≈Ç√≥wnym zadaniem. <span class="points">(+${points.checkContext} pkt)</span>` });
                         scoreIncrement += points.checkContext;
                     } else {
                         feedback.push({ type: 'improve', text: `W tej lekcji uczymy siƒô pytaƒá AI o jego wiedzƒô. Brak pytania sprawdzajƒÖcego <span class="no-points">(-${points.checkContext} pkt)</span>. Spr√≥buj dodaƒá np. "Zanim przygotujesz podsumowanie, powiedz mi, czy masz dostƒôp do danych z ostatniego miesiƒÖca?"` });
                     }

                     // Sprawdzenie g≈Ç√≥wnego zadania
                     if (lowerPrompt.includes('podsumowanie') && lowerPrompt.includes('zmian') && (lowerPrompt.includes('regulacj') || lowerPrompt.includes('prawnych')) && lowerPrompt.includes('prosument') && (lowerPrompt.includes('ostatniego miesiƒÖca') || lowerPrompt.includes('najnowszych'))) {
                          feedback.push({ type: 'good', text: `G≈Ç√≥wne zadanie (podsumowanie najnowszych regulacji dla prosument√≥w) jest obecne. <span class="points">(+${points.task} pkt)</span>` });
                          scoreIncrement += points.task;
                     } else {
                          feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe w prompcie jasno okre≈õlasz g≈Ç√≥wne zadanie: podsumowanie najnowszych (z ostatniego miesiƒÖca) regulacji dla prosument√≥w OZE.' });
                     }

                     // Tips
                     feedback.push({ type: 'model-tip', text: 'Pytanie o ≈∫r√≥d≈Ça lub aktualno≈õƒá danych jest szczeg√≥lnie wa≈ºne przy tematach szybko siƒô zmieniajƒÖcych (prawo, technologia, wydarzenia).' });
                     feedback.push({ type: 'model-tip', text: 'Je≈õli AI odpowie, ≈ºe nie ma danych, mo≈ºesz je dostarczyƒá w kolejnym prompcie (Contextual Prompting).' });
                     return { feedback, scoreIncrement };
                 }
             },
            // Lekcja 10: Step-back Prompting
            { id: 10, technique: "Step-back Prompting (Krok Wstecz dla Abstrakcji)", explanation: "<p>Step-back: popro≈õ AI, aby najpierw cofnƒô≈Ço siƒô i zastanowi≈Ço nad og√≥lnymi zasadami/definicjami zwiƒÖzanymi z pytaniem, a dopiero potem odpowiedzia≈Ço na samo pytanie.</p><p>Pomaga uzyskaƒá bardziej ugruntowane odpowiedzi, unikajƒÖc pochopnych wniosk√≥w.</p><p><b>Struktura:</b> Najpierw popro≈õ o og√≥lne zasady/definicje, potem zadaj konkretne pytanie.</p><p>Przyk≈Çad:</p><div class='example-prompt'><code>Zanim odpowiesz na pytanie o przysz≈Ço≈õƒá samochod√≥w elektrycznych, najpierw wyja≈õnij og√≥lne czynniki wp≈ÇywajƒÖce na adopcjƒô nowych technologii w transporcie.\n\nPytanie: Jaka jest Twoja prognoza udzia≈Çu samochod√≥w elektrycznych w rynku do 2035 roku?</code></div>", task: "Czy fuzja termojƒÖdrowa mo≈ºe staƒá siƒô g≈Ç√≥wnym ≈∫r√≥d≈Çem energii do 2050? Zanim ocenisz szanse, zdefiniuj kr√≥tko fuzjƒô i warunki dla 'g≈Ç√≥wnego ≈∫r√≥d≈Ça' energii.", task_type: 'write_prompt', evaluation: (promptText, scenario)=>{ const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { stepBack: 4, bothParts: 2 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique}` }); const stepBackKeywords = ['zanim', 'najpierw zdefiniuj', 'przed ocenƒÖ', 'zacznij od og√≥lnych zasad', 'cofnijmy siƒô o krok', 'zdefiniuj fuzj', 'warunki dla g≈Ç√≥wnego ≈∫r√≥d≈Ça', 'og√≥lne t≈Ço', 'szerszy kontekst', 'podstawowe zasady']; const specificQuestionKeywords = ['czy fuzja', 'termojƒÖdrowa', 'g≈Ç√≥wnym ≈∫r√≥d≈Çem', 'do 2050', 'ocenisz szanse']; let foundStepBackInstruction = false; let foundSpecificQuestion = false; let stepBackIndex = -1; let specificQuestionIndex = -1; for (const keyword of stepBackKeywords) { const idx = lowerPrompt.indexOf(keyword); if (idx !== -1) { foundStepBackInstruction = true; if (stepBackIndex === -1 || idx < stepBackIndex) stepBackIndex = idx; } } for (const keyword of specificQuestionKeywords) { const idx = lowerPrompt.indexOf(keyword); if (idx !== -1) { foundSpecificQuestion = true; if (specificQuestionIndex === -1 || idx < specificQuestionIndex) specificQuestionIndex = idx; } } if (foundStepBackInstruction && foundSpecificQuestion && stepBackIndex < specificQuestionIndex) { feedback.push({ type: 'good', text: `Doskonale! Zastosowa≈Çe≈õ strukturƒô Step-back (og√≥lne zasady PRZED konkretnym pytaniem). <span class="points">(+${points.stepBack} pkt)</span>` }); scoreIncrement += points.stepBack; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz o Step-back? Brak pro≈õby o og√≥lne zasady PRZED g≈Ç√≥wnym pytaniem <span class="no-points">(-${points.stepBack} pkt)</span>. U≈ºyj np. "Zanim odpowiesz, zdefiniuj..."` }); } if (foundStepBackInstruction && foundSpecificQuestion) { feedback.push({ type: 'good', text: `Prompt zawiera obie czƒô≈õci zadania (definicje i pytanie). <span class="points">(+${points.bothParts} pkt)</span>` }); scoreIncrement += points.bothParts; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe prompt zawiera zar√≥wno pro≈õbƒô o definicje (step-back), jak i g≈Ç√≥wne pytanie o fuzjƒô.' }); } feedback.push({ type: 'model-tip', text: 'Step-back pomaga unikaƒá pochopnych wniosk√≥w i ugruntowaƒá odpowiedzi.' }); return { feedback, scoreIncrement }; } },
            // Lekcja 11: Self-Consistency
            { id: 11, technique: "Self-Consistency (Sp√≥jno≈õƒá Wewnƒôtrzna)", explanation: "<p>Self-Consistency: Generuj wiele ≈õcie≈ºek rozumowania (np. przez CoT z r√≥≈ºnymi 'perspektywami'), wybierz najczƒôstszƒÖ odpowied≈∫. Zwiƒôksza niezawodno≈õƒá.</p><p><b>Cel:</b> Uzyskanie bardziej wiarygodnej odpowiedzi przez por√≥wnanie wynik√≥w z r√≥≈ºnych podej≈õƒá.</p><p>Symulacja: Napisz prompt *zachƒôcajƒÖcy* do rozwa≈ºenia problemu z r√≥≈ºnych perspektyw lub r√≥≈ºnymi metodami analizy.</p>", task: "Pytanie: '3 g≈Ç√≥wne d≈Çugoterminowe (>2050) wyzwania dla offshore wind?'. Sformu≈Çuj prompt zachƒôcajƒÖcy model do rozwa≈ºenia problemu z r√≥≈ºnych perspektyw/≈õcie≈ºek rozumowania dla wiƒôkszej wiarygodno≈õci.", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { consistencyPrompt: 4, task: 2 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique} (Konceptualna)` }); const consistencyKeywords = ['r√≥≈ºne perspektywy', 'r√≥≈ºne punkty widzenia', 'kilka sposob√≥w', 'r√≥≈ºne ≈õcie≈ºki', 'alternatywne podej≈õcia', 'sp√≥jne wnioski', 'najbardziej prawdopodobne', 'rozwa≈º r√≥≈ºne aspekty', 'wieloma drogami', 'por√≥wnaj wyniki', 'sprawd≈∫ sp√≥jno≈õƒá', 'wiele metod']; let foundConsistencyPrompt = false; for (const keyword of consistencyKeywords) { if (lowerPrompt.includes(keyword)) { foundConsistencyPrompt = true; break; } } if (foundConsistencyPrompt) { feedback.push({ type: 'good', text: `Dobrze! Prompt zachƒôca do rozwa≈ºenia problemu z r√≥≈ºnych stron (idea Self-Consistency). <span class="points">(+${points.consistencyPrompt} pkt)</span>` }); scoreIncrement += points.consistencyPrompt; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz ideƒô Self-Consistency? Brak zachƒôty do r√≥≈ºnorodnego my≈õlenia <span class="no-points">(-${points.consistencyPrompt} pkt)</span>. Dodaj np. "Przeanalizuj to z r√≥≈ºnych punkt√≥w widzenia...".` }); } if (lowerPrompt.includes('wyzwania') && (lowerPrompt.includes('wiatrowej na morzu') || lowerPrompt.includes('offshore')) && (lowerPrompt.includes('d≈Çugoterminowe') || lowerPrompt.includes('po 2050') || lowerPrompt.includes('>2050'))) { feedback.push({ type: 'good', text: `G≈Ç√≥wne zadanie jest jasno okre≈õlone. <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe jasno okre≈õlasz g≈Ç√≥wne pytanie: 3 d≈Çugoterminowe wyzwania dla offshore wind.' }); } feedback.push({ type: 'model-tip', text: 'Prawdziwa Self-Consistency wymaga generowania wielu odpowiedzi i wyboru wiƒôkszo≈õciowej.' }); return { feedback, scoreIncrement }; } },
            // Lekcja 12: Tree of Thoughts (ToT)
            { id: 12, technique: "Tree of Thoughts (ToT - Drzewo My≈õli)", explanation: "<p>ToT: Eksploruj wiele 'ga≈Çƒôzi' rozumowania, oceniaj je i wybieraj najlepszƒÖ ≈õcie≈ºkƒô, potencjalnie wracajƒÖc (backtracking).</p><p>Przydatne w z≈Ço≈ºonym planowaniu i rozwiƒÖzywaniu problem√≥w, gdzie jest wiele mo≈ºliwych dr√≥g.</p><p><b>Symulacja:</b> Popro≈õ AI o rozwa≈ºenie kilku opcji, ocenƒô ich potencja≈Çu/wad na danym etapie, a nastƒôpnie wyb√≥r i rozwiniƒôcie najbardziej obiecujƒÖcej.</p>", task: "Opracuj strategiƒô dekarbonizacji transportu ciƒô≈ºkiego w PL do 2060. Poprowad≈∫ AI przez proces ToT: zidentyfikuj opcje (np. elektryfikacja, H2, bio), oce≈Ñ potencja≈Ç/wyzwania, wybierz 1-2 i rozwi≈Ñ.", task_type: 'write_prompt', evaluation: (promptText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerPrompt = promptText.toLowerCase(); const points = { totStructure: 4, task: 2 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique} (Konceptualna)` }); const totKeywords = ['rozwa≈º opcje', 'zidentyfikuj alternatywy', 'oce≈Ñ ka≈ºdƒÖ', 'por√≥wnaj potencja≈Ç', 'wybierz najlepsz', 'rozwi≈Ñ najbardziej obiecujƒÖc', 'drzewo mo≈ºliwo≈õci', 'analiza wieloetapowa', 'plusy i minusy ka≈ºdej opcji', 'rozga≈Çƒôzienia', 'ewaluacja ≈õcie≈ºek', 'por√≥wnaj drogi']; const optionKeywords = ['elektryfikacja', 'wod√≥r', 'biopaliwa', 'syntetyczne']; let foundTotStructurePrompt = false; let foundOptionsMention = false; let totKeywordCount = 0; for (const keyword of totKeywords) { if (lowerPrompt.includes(keyword)) totKeywordCount++; } for (const keyword of optionKeywords) { if (lowerPrompt.includes(keyword)) foundOptionsMention = true; } if (totKeywordCount >= 2 && foundOptionsMention) { feedback.push({ type: 'good', text: `Bardzo dobrze! Prompt instruuje AI, aby rozwa≈ºy≈Ço opcje, oceni≈Ço je i wybra≈Ço (symulacja ToT). <span class="points">(+${points.totStructure} pkt)</span>` }); scoreIncrement += points.totStructure; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz ideƒô ToT? Brak instrukcji do eksploracji i oceny opcji <span class="no-points">(-${points.totStructure} pkt)</span>. Popro≈õ np. o: 1. Wymienienie opcji (elektryfikacja, H2...). 2. Ocenƒô ich. 3. Wyb√≥r i rozwiniƒôcie najlepszej.` }); } if (lowerPrompt.includes('strategi') && lowerPrompt.includes('dekarbonizacj') && lowerPrompt.includes('transport ciƒô≈ºki') && (lowerPrompt.includes('polsce') || lowerPrompt.includes('polski')) && lowerPrompt.includes('2060')) { feedback.push({ type: 'good', text: `G≈Ç√≥wne zadanie jest jasno okre≈õlone. <span class="points">(+${points.task} pkt)</span>` }); scoreIncrement += points.task; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe jasno okre≈õlasz g≈Ç√≥wne zadanie: strategia dekarbonizacji transportu ciƒô≈ºkiego w PL do 2060.' }); } feedback.push({ type: 'model-tip', text: 'Pe≈Çna implementacja ToT wymaga z≈Ço≈ºonego systemu kontrolujƒÖcego LLM.' }); return { feedback, scoreIncrement }; } },
            // Lekcja 13: ReAct
             { id: 13, technique: "ReAct (Reason & Act - Rozumowanie i Dzia≈Çanie)", explanation: "<p>ReAct ≈ÇƒÖczy rozumowanie (Reasoning) z dzia≈Çaniem (Acting - u≈ºywanie narzƒôdzi np. search). Cykl: My≈õl -> Akcja -> Obserwacja -> My≈õl...</p><p>Kluczowy dla zada≈Ñ wymagajƒÖcych aktualnych danych lub interakcji. Zadanie: Opisz ten proces.</p><p><b>Przyk≈Çad opisu fragmentu cyklu:</b></p><div class='example-prompt'><code>My≈õl: Muszƒô sprawdziƒá najnowsze regulacje dotyczƒÖce SMR w Polsce.\nAkcja: search(\"nowe przepisy SMR Polska 2025\")\nObserwacja: Znalaz≈Çem artyku≈Ç o nowelizacji ustawy X z dnia Y.\nMy≈õl: OK, muszƒô przeczytaƒá tƒô nowelizacjƒô, aby znale≈∫ƒá konkretne zmiany...</code></div>", task: "Agent AI (ReAct) ma odpowiedzieƒá: 'Jaki jest aktualny status prawny budowy SMR w Polsce?'. Opisz sekwencjƒô krok√≥w (My≈õl -> Akcja -> Obserwacja -> My≈õl...), jakƒÖ agent by podjƒÖ≈Ç. Jakie 'narzƒôdzie' (np. search) by u≈ºy≈Ç?", task_type: 'describe_process', evaluation: (descriptionText, scenario) => { const feedback = []; let scoreIncrement = 0; const lowerDescription = descriptionText.toLowerCase(); const points = { reactCycle: 4, toolUse: 2, taskContext: 1 }; feedback.push({ type: 'info', text: `Testowana technika: ${scenario.technique} (Opis Procesu)` }); const thoughtKeywords = ['my≈õl:', 'my≈õlƒô, ≈ºe', 'plan:', 'strategia:', 'zastanawiam siƒô']; const actionKeywords = ['akcja:', 'dzia≈Çanie:', 'u≈ºyj narzƒôdzia', 'search[', 'wyszukaj:', 'google_search(']; const observationKeywords = ['obserwacja:', 'wynik:', 'znalaz≈Çem:', 'odpowied≈∫ narzƒôdzia:']; let thoughtCount = 0; let actionCount = 0; let observationCount = 0; thoughtKeywords.forEach(k => { thoughtCount += (lowerDescription.match(new RegExp(k.replace(/[\[\]\(\)]/g, '\\$&'), 'g')) || []).length; }); actionKeywords.forEach(k => { actionCount += (lowerDescription.match(new RegExp(k.replace(/[\[\]\(\)]/g, '\\$&'), 'g')) || []).length; }); observationKeywords.forEach(k => { observationCount += (lowerDescription.match(new RegExp(k.replace(/[\[\]\(\)]/g, '\\$&'), 'g')) || []).length; }); const usesTool = lowerDescription.includes('search[') || lowerDescription.includes('wyszukaj') || lowerDescription.includes('google_search(') || lowerDescription.includes('narzƒôdzie wyszukiwania') || lowerDescription.includes('api') || lowerDescription.includes('bazy danych'); if (thoughtCount >= 1 && actionCount >= 1 && observationCount >= 1 && usesTool) { feedback.push({ type: 'good', text: `Doskonale! Opis poprawnie przedstawia cykl ReAct (My≈õl -> Akcja -> Obserwacja) i wskazuje na u≈ºycie narzƒôdzia (Akcja). <span class="points">(+${points.reactCycle + points.toolUse} pkt)</span>` }); scoreIncrement += points.reactCycle + points.toolUse; } else if (thoughtCount >= 1 && actionCount >= 1 && observationCount >= 1) { feedback.push({ type: 'improve', text: `Opis zawiera cykl My≈õl-Akcja-Obserwacja <span class="points">(+${points.reactCycle} pkt)</span>, ale brakuje jasnego wskazania u≈ºycia narzƒôdzia w Akcji <span class="no-points">(-${points.toolUse} pkt)</span>. Dodaj np. 'Akcja: search[aktualne przepisy SMR Polska]'.` }); scoreIncrement += points.reactCycle; } else { feedback.push({ type: 'improve', text: `Pamiƒôtasz lekcjƒô o ReAct? Brak pe≈Çnego cyklu My≈õl-Akcja-Obserwacja w opisie <span class="no-points">(-${points.reactCycle + points.toolUse} pkt)</span>. Opisz sekwencjƒô: 1. My≈õl (plan), 2. Akcja (u≈ºycie narzƒôdzia np. search), 3. Obserwacja (wynik), 4. My≈õl (co dalej?).` }); } if (lowerDescription.includes('smr') || lowerDescription.includes('ma≈Çe reaktory') || lowerDescription.includes('status prawny') || lowerDescription.includes('przepisy')) { feedback.push({ type: 'good', text: `Opis odnosi siƒô do w≈Ça≈õciwego zadania (status prawny SMR). <span class="points">(+${points.taskContext} pkt)</span>` }); scoreIncrement += points.taskContext; } else { feedback.push({ type: 'improve', text: 'Upewnij siƒô, ≈ºe Tw√≥j opis procesu ReAct dotyczy zadanego pytania o status prawny SMR w Polsce.' }); } feedback.push({ type: 'model-tip', text: 'ReAct jest podstawƒÖ dzia≈Çania wielu nowoczesnych agent√≥w AI.' }); return { feedback, scoreIncrement }; } },
        ];

        // --- Stan Gry (bez zmian) ---
        let currentScenarioIndex = 0;
        let score = 0;
        let currentPhase = 'start';

        // --- Elementy DOM (bez zmian) ---
        const startScreen = document.getElementById('start-screen');
        const gameContainer = document.getElementById('game-container');
        const startButton = document.getElementById('start-button');
        const explanationDisplay = document.getElementById('explanation-display');
        const explanationTitle = document.getElementById('explanation-title');
        const explanationText = document.getElementById('explanation-text');
        const taskDisplay = document.getElementById('task-display');
        const taskText = document.getElementById('task-text'); // Teraz div
        const promptInputArea = document.getElementById('prompt-input-area');
        const promptInput = document.getElementById('prompt-input');
        const choiceTaskArea = document.getElementById('choice-task-area');
        const proceedButton = document.getElementById('proceed-button');
        const submitButton = document.getElementById('submit-button');
        const nextButton = document.getElementById('next-button');
        const feedbackDisplay = document.getElementById('feedback-display');
        const feedbackList = document.getElementById('feedback-list');
        const scoreDisplay = document.getElementById('score-display');

        // --- Funkcje Gry (logika bez zmian, tylko drobne poprawki) ---

        function initGame() { /* ... bez zmian ... */
            startScreen.style.display = 'block'; gameContainer.style.display = 'none'; currentPhase = 'start'; score = 0; currentScenarioIndex = 0; updateScoreDisplay();
         }
        function startGame() { /* ... bez zmian ... */
            startScreen.style.display = 'none'; gameContainer.style.display = 'block'; loadScenario(currentScenarioIndex);
         }

        function loadScenario(index) {
            if (index < scenarios.length) {
                const scenario = scenarios[index];
                currentPhase = 'explanation';
                explanationTitle.textContent = `Lekcja ${index + 1}/${scenarios.length}: ${scenario.technique}`;
                explanationText.innerHTML = scenario.explanation;
                taskText.innerHTML = scenario.task; // U≈ºywamy innerHTML

                promptInputArea.style.display = 'none';
                choiceTaskArea.style.display = 'none';
                choiceTaskArea.innerHTML = '';

                submitButton.classList.remove('react-submit', 'choice-submit', 'answer-submit');
                if (scenario.task_type === 'describe_process') {
                    promptInput.placeholder = "Opisz proces ReAct tutaj...";
                    submitButton.textContent = "Oce≈Ñ Opis";
                    submitButton.classList.add('react-submit');
                } else if (scenario.task_type === 'choose_prompt' || scenario.task_type === 'identify_knowledge_source') { // Obs≈Çuga obu typ√≥w wyboru
                     submitButton.textContent = "Oce≈Ñ Wyb√≥r";
                     submitButton.classList.add('choice-submit');
                } else if (scenario.task_type === 'answer_question_from_context') {
                     promptInput.placeholder = "Wpisz odpowied≈∫ opartƒÖ TYLKO na tek≈õcie...";
                     submitButton.textContent = "Oce≈Ñ Odpowied≈∫";
                     submitButton.classList.add('answer-submit');
                } else { // Domy≈õlnie 'write_prompt'
                    promptInput.placeholder = "Wpisz sw√≥j prompt tutaj...";
                    submitButton.textContent = "Oce≈Ñ Prompt";
                }

                explanationDisplay.style.display = 'flex';
                taskDisplay.style.display = 'none';
                feedbackDisplay.style.display = 'none';
                feedbackList.innerHTML = '';
                proceedButton.style.display = 'inline-block';
                submitButton.style.display = 'none';
                nextButton.style.display = 'none';
                promptInput.value = '';
                promptInput.disabled = false;
            } else {
                 showEndGameScreen();
            }
             updateScoreDisplay();
        }

        function showEndGameScreen() { /* ... bez zmian ... */
             explanationDisplay.style.display = 'none'; taskDisplay.style.display = 'flex';
             taskText.innerHTML = `üèÜ Gratulacje Mistrzu Prompt√≥w! üèÜ<br><br>Uko≈Ñczy≈Çe≈õ wszystkie ${scenarios.length} lekcji.<br><br>Tw√≥j ko≈Ñcowy wynik: <span style="color: #f1c40f; font-size: 1.2em;">${score}</span> punkt√≥w!<br><br><small>Od≈õwie≈º stronƒô, aby zagraƒá ponownie.</small>`;
             promptInputArea.style.display = 'none'; choiceTaskArea.style.display = 'none'; feedbackDisplay.style.display = 'none'; proceedButton.style.display = 'none'; submitButton.style.display = 'none'; nextButton.style.display = 'none'; scoreDisplay.style.display = 'none';
         }

        function proceedToTask() {
             currentPhase = 'task'; const scenario = scenarios[currentScenarioIndex];
             explanationDisplay.style.display = 'none'; taskDisplay.style.display = 'flex';
             // Poka≈º odpowiedni obszar wprowadzania/wyboru
             if (scenario.task_type === 'choose_prompt' || scenario.task_type === 'identify_knowledge_source') {
                 promptInputArea.style.display = 'none';
                 choiceTaskArea.style.display = 'block';
                 renderChoiceOptions(scenario.options, scenario.task_type); // Przeka≈º typ zadania
             } else { // Dla 'write_prompt', 'describe_process', 'answer_question_from_context'
                 promptInputArea.style.display = 'block';
                 choiceTaskArea.style.display = 'none';
                 promptInput.focus();
             }
             proceedButton.style.display = 'none'; submitButton.style.display = 'inline-block'; nextButton.style.display = 'none';
         }

        // Zaktualizowano renderChoiceOptions, aby obs≈Çugiwaƒá r√≥≈ºne typy zada≈Ñ wyboru
        function renderChoiceOptions(options, taskType) {
            choiceTaskArea.innerHTML = '';
            const inputName = (taskType === 'identify_knowledge_source') ? 'knowledgeSourceChoice' : 'promptChoice'; // R√≥≈ºne nazwy grup radio
            options.forEach(option => {
                const div = document.createElement('div');
                div.className = 'prompt-choice'; // U≈ºywamy tej samej klasy dla sp√≥jno≈õci
                let labelContent = "";
                if (taskType === 'identify_knowledge_source') {
                    labelContent = escapeHtml(option.text); // Dla ≈∫r√≥d≈Ça wiedzy tylko tekst
                } else { // Dla 'choose_prompt' pokazujemy preformatowany kod
                     labelContent = `Opcja ${option.id}:<pre><code>${escapeHtml(option.text)}</code></pre>`;
                }
                div.innerHTML = `
                    <input type="radio" id="choice-${option.id}" name="${inputName}" value="${option.id}">
                    <label for="choice-${option.id}">${labelContent}</label>
                `;
                choiceTaskArea.appendChild(div);
            });
         }

        function escapeHtml(unsafe) { /* ... bez zmian ... */
            if (!unsafe) return ''; return unsafe.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
         }

        function evaluateResponse() {
            const scenario = scenarios[currentScenarioIndex]; let userInput; let result;
            // Logika pobierania danych wej≈õciowych w zale≈ºno≈õci od typu zadania
            if (scenario.task_type === 'choose_prompt' || scenario.task_type === 'identify_knowledge_source') {
                const inputName = (scenario.task_type === 'identify_knowledge_source') ? 'knowledgeSourceChoice' : 'promptChoice';
                const selectedOption = document.querySelector(`input[name="${inputName}"]:checked`);
                if (!selectedOption) { showSimpleMessage('Wybierz jednƒÖ z opcji przed ocenƒÖ!'); return; }
                userInput = selectedOption.value;
                result = scenario.evaluation(userInput, scenario);
            } else { // 'write_prompt', 'describe_process', 'answer_question_from_context'
                userInput = promptInput.value.trim();
                if (!userInput) { const message = scenario.task_type === 'describe_process' ? 'Wpisz sw√≥j opis procesu!' : (scenario.task_type === 'answer_question_from_context' ? 'Wpisz swojƒÖ odpowied≈∫!' : 'Wpisz sw√≥j prompt!'); showSimpleMessage(message); return; }
                result = scenario.evaluation(userInput, scenario);
            }
            // Reszta logiki oceny i wy≈õwietlania feedbacku bez zmian
            if (result.scoreIncrement > 0) { score += result.scoreIncrement; updateScoreDisplay(); }
            feedbackList.innerHTML = ''; result.feedback.forEach(item => { const li = document.createElement('li'); li.classList.add(item.type); li.innerHTML = item.text; feedbackList.appendChild(li); });
            feedbackDisplay.style.display = 'block'; submitButton.style.display = 'none'; promptInput.disabled = true; document.querySelectorAll('input[name="promptChoice"], input[name="knowledgeSourceChoice"]').forEach(radio => radio.disabled = true);
            if (currentScenarioIndex < scenarios.length - 1) { nextButton.style.display = 'inline-block'; } else { nextButton.style.display = 'none'; setTimeout(() => { showEndGameScreen(); }, 1500); }
        }

        function nextLesson() { /* ... bez zmian ... */
            currentScenarioIndex++; loadScenario(currentScenarioIndex);
         }
        function updateScoreDisplay() { /* ... bez zmian ... */
             scoreDisplay.textContent = `Wynik: ${score}`;
         }
        function showSimpleMessage(message) { /* ... bez zmian ... */
            const existingModal = document.querySelector('.simple-modal'); if (existingModal) { document.body.removeChild(existingModal); } const modal = document.createElement('div'); modal.className = 'simple-modal'; modal.innerHTML = message.replace(/\n/g, '<br>'); const closeButton = document.createElement('button'); closeButton.textContent = 'OK'; closeButton.onclick = () => { if (document.body.contains(modal)) { document.body.removeChild(modal); } }; modal.appendChild(closeButton); document.body.appendChild(modal); closeButton.focus();
         }

        // --- Inicjalizacja Gry (bez zmian) ---
        startButton.addEventListener('click', startGame);
        proceedButton.addEventListener('click', proceedToTask);
        submitButton.addEventListener('click', evaluateResponse);
        nextButton.addEventListener('click', nextLesson);
        window.onload = () => { initGame(); };

    </script>
</body>
</html>
